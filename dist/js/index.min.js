(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var r=t.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var i=r.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.p;const e=t.p+"../audio/click.mp3",r=(t.p,t.p+"../audio/confetti.wav"),i=(t.p,t.p+"../audio/path.wav"),l=['<svg width="330" height="330" viewBox="0 0 330 330" fill="none" xmlns="http://www.w3.org/2000/svg" style="--shape-scale:1" data-order="0,1,2,3">\n\t<path d="M82.5 0H165V247.5H82.5V0Z" fill="#0374E1"/>\n\t<path d="M0 247.5L-3.60619e-06 165L247.5 165L247.5 247.5L0 247.5Z" fill="#5FCC3B"/>\n\t<path d="M247.5 330L165 330L165 82.5L247.5 82.5L247.5 330Z" fill="#FDCD2B"/>\n\t<path d="M330 82.5L330 165L82.5 165L82.5 82.5L330 82.5Z" fill="#F23C31"/>\n\t<circle cx="205.7" cy="41.8" r="30.9" transform="rotate(90 205.7 41.8)" fill="white" stroke="#FDCD2B" stroke-width="2"/>\n\t<path d="M205.7 59.5224L192.399 31.1668L219.002 31.1668L205.7 59.5224Z" fill="#FDCD2B"/>\n\t<circle cx="41.8" cy="123.2" r="30.9" fill="white" stroke="#F23C31" stroke-width="2"/>\n\t<path d="M59.5223 123.2L31.1668 136.502L31.1668 109.899L59.5223 123.2Z" fill="#F23C31"/>\n\t<circle cx="123.2" cy="288.2" r="30.9" transform="rotate(-90 123.2 288.2)" fill="white" stroke="#0374E1" stroke-width="2"/>\n\t<path d="M123.2 270.478L136.501 298.833L109.898 298.833L123.2 270.478Z" fill="#0374E1"/>\n\t<circle cx="288.2" cy="206.8" r="30.9" transform="rotate(180 288.2 206.8)" fill="white" stroke="#5FCC3B" stroke-width="2"/>\n\t<path d="M270.478 206.8L298.833 193.498L298.833 220.101L270.478 206.8Z" fill="#5FCC3B"/>\n\t</svg>\n\t','<svg width="272" height="385" viewBox="0 0 272 385" fill="none" xmlns="http://www.w3.org/2000/svg" style="--shape-scale:1.34;--shape-y:3px;" data-order="0,1,2,3;0,2,1,3;0,2,3,1">\n\t<path d="M77 136L136 77L195 136V326H77V136Z" fill="#EA5628"/>\n\t<rect x="59" y="296" width="154" height="30" fill="#D9170B"/>\n\t<rect width="241.514" height="32.9005" transform="matrix(0.707107 0.707107 0.707107 -0.707107 39 62.2642)" fill="#FF9029"/>\n\t<rect width="241.514" height="32.9005" transform="matrix(-0.707107 0.707107 0.707107 0.707107 209.776 39)" fill="#FDCD2B"/>\n\t<circle cx="136" cy="358" r="26" transform="rotate(-90 136 358)" fill="white" stroke="#EA5628" stroke-width="2"/>\n\t<path d="M136 343L147.258 367L124.742 367L136 343Z" fill="#EA5628"/>\n\t<circle cx="245" cy="311" r="26" transform="rotate(180 245 311)" fill="white" stroke="#D9170B" stroke-width="2"/>\n\t<path d="M230 311L254 299.742L254 322.258L230 311Z" fill="#D9170B"/>\n\t<circle cx="27" cy="27" r="26" transform="rotate(-90 27 27)" fill="white" stroke="#FF9029" stroke-width="2"/>\n\t<path d="M38.3137 39.3137L13.3823 30.304L29.304 14.3823L38.3137 39.3137Z" fill="#FF9029"/>\n\t<circle cx="245" cy="27" r="26" transform="rotate(-90 245 27)" fill="white" stroke="#FDCD2B" stroke-width="2"/>\n\t<path d="M233.686 39.3137L242.696 14.3823L258.618 30.304L233.686 39.3137Z" fill="#FDCD2B"/>\n\t</svg>\n\t','<svg width="330" height="330" viewBox="0 0 330 330" fill="none" xmlns="http://www.w3.org/2000/svg" style="--shape-scale:1" data-order="0,1,2,3">\n\t<path d="M82.5 0H165V247.5H82.5V0Z" fill="#0374E1"/>\n\t<path d="M0 247.5L-3.60619e-06 165L247.5 165L247.5 247.5L0 247.5Z" fill="#5FCC3B"/>\n\t<path d="M247.5 330L165 330L165 82.5L247.5 82.5L247.5 330Z" fill="#FDCD2B"/>\n\t<path d="M330 82.5L330 165L82.5 165L82.5 82.5L330 82.5Z" fill="#F23C31"/>\n\t<circle cx="205.7" cy="41.8" r="30.9" transform="rotate(90 205.7 41.8)" fill="white" stroke="#FDCD2B" stroke-width="2"/>\n\t<path d="M205.7 59.5224L192.399 31.1668L219.002 31.1668L205.7 59.5224Z" fill="#FDCD2B"/>\n\t<circle cx="41.8" cy="123.2" r="30.9" fill="white" stroke="#F23C31" stroke-width="2"/>\n\t<path d="M59.5223 123.2L31.1668 136.502L31.1668 109.899L59.5223 123.2Z" fill="#F23C31"/>\n\t<circle cx="123.2" cy="288.2" r="30.9" transform="rotate(-90 123.2 288.2)" fill="white" stroke="#0374E1" stroke-width="2"/>\n\t<path d="M123.2 270.478L136.501 298.833L109.898 298.833L123.2 270.478Z" fill="#0374E1"/>\n\t<circle cx="288.2" cy="206.8" r="30.9" transform="rotate(180 288.2 206.8)" fill="white" stroke="#5FCC3B" stroke-width="2"/>\n\t<path d="M270.478 206.8L298.833 193.498L298.833 220.101L270.478 206.8Z" fill="#5FCC3B"/>\n\t</svg>\n\t','<svg width="272" height="385" viewBox="0 0 272 385" fill="none" xmlns="http://www.w3.org/2000/svg" style="--shape-scale:1.34;--shape-y:3px;" data-order="0,1,2,3;0,2,1,3;0,2,3,1">\n\t<path d="M77 136L136 77L195 136V326H77V136Z" fill="#EA5628"/>\n\t<rect x="59" y="296" width="154" height="30" fill="#D9170B"/>\n\t<rect width="241.514" height="32.9005" transform="matrix(0.707107 0.707107 0.707107 -0.707107 39 62.2642)" fill="#FF9029"/>\n\t<rect width="241.514" height="32.9005" transform="matrix(-0.707107 0.707107 0.707107 0.707107 209.776 39)" fill="#FDCD2B"/>\n\t<circle cx="136" cy="358" r="26" transform="rotate(-90 136 358)" fill="white" stroke="#EA5628" stroke-width="2"/>\n\t<path d="M136 343L147.258 367L124.742 367L136 343Z" fill="#EA5628"/>\n\t<circle cx="245" cy="311" r="26" transform="rotate(180 245 311)" fill="white" stroke="#D9170B" stroke-width="2"/>\n\t<path d="M230 311L254 299.742L254 322.258L230 311Z" fill="#D9170B"/>\n\t<circle cx="27" cy="27" r="26" transform="rotate(-90 27 27)" fill="white" stroke="#FF9029" stroke-width="2"/>\n\t<path d="M38.3137 39.3137L13.3823 30.304L29.304 14.3823L38.3137 39.3137Z" fill="#FF9029"/>\n\t<circle cx="245" cy="27" r="26" transform="rotate(-90 245 27)" fill="white" stroke="#FDCD2B" stroke-width="2"/>\n\t<path d="M233.686 39.3137L242.696 14.3823L258.618 30.304L233.686 39.3137Z" fill="#FDCD2B"/>\n\t</svg>\n\t','<svg width="330" height="330" viewBox="0 0 330 330" fill="none" xmlns="http://www.w3.org/2000/svg" style="--shape-scale:1" data-order="0,1,2,3">\n\t<path d="M82.5 0H165V247.5H82.5V0Z" fill="#0374E1"/>\n\t<path d="M0 247.5L-3.60619e-06 165L247.5 165L247.5 247.5L0 247.5Z" fill="#5FCC3B"/>\n\t<path d="M247.5 330L165 330L165 82.5L247.5 82.5L247.5 330Z" fill="#FDCD2B"/>\n\t<path d="M330 82.5L330 165L82.5 165L82.5 82.5L330 82.5Z" fill="#F23C31"/>\n\t<circle cx="205.7" cy="41.8" r="30.9" transform="rotate(90 205.7 41.8)" fill="white" stroke="#FDCD2B" stroke-width="2"/>\n\t<path d="M205.7 59.5224L192.399 31.1668L219.002 31.1668L205.7 59.5224Z" fill="#FDCD2B"/>\n\t<circle cx="41.8" cy="123.2" r="30.9" fill="white" stroke="#F23C31" stroke-width="2"/>\n\t<path d="M59.5223 123.2L31.1668 136.502L31.1668 109.899L59.5223 123.2Z" fill="#F23C31"/>\n\t<circle cx="123.2" cy="288.2" r="30.9" transform="rotate(-90 123.2 288.2)" fill="white" stroke="#0374E1" stroke-width="2"/>\n\t<path d="M123.2 270.478L136.501 298.833L109.898 298.833L123.2 270.478Z" fill="#0374E1"/>\n\t<circle cx="288.2" cy="206.8" r="30.9" transform="rotate(180 288.2 206.8)" fill="white" stroke="#5FCC3B" stroke-width="2"/>\n\t<path d="M270.478 206.8L298.833 193.498L298.833 220.101L270.478 206.8Z" fill="#5FCC3B"/>\n\t</svg>\n\t','<svg width="272" height="385" viewBox="0 0 272 385" fill="none" xmlns="http://www.w3.org/2000/svg" style="--shape-scale:1.34;--shape-y:3px;" data-order="0,1,2,3;0,2,1,3;0,2,3,1">\n\t<path d="M77 136L136 77L195 136V326H77V136Z" fill="#EA5628"/>\n\t<rect x="59" y="296" width="154" height="30" fill="#D9170B"/>\n\t<rect width="241.514" height="32.9005" transform="matrix(0.707107 0.707107 0.707107 -0.707107 39 62.2642)" fill="#FF9029"/>\n\t<rect width="241.514" height="32.9005" transform="matrix(-0.707107 0.707107 0.707107 0.707107 209.776 39)" fill="#FDCD2B"/>\n\t<circle cx="136" cy="358" r="26" transform="rotate(-90 136 358)" fill="white" stroke="#EA5628" stroke-width="2"/>\n\t<path d="M136 343L147.258 367L124.742 367L136 343Z" fill="#EA5628"/>\n\t<circle cx="245" cy="311" r="26" transform="rotate(180 245 311)" fill="white" stroke="#D9170B" stroke-width="2"/>\n\t<path d="M230 311L254 299.742L254 322.258L230 311Z" fill="#D9170B"/>\n\t<circle cx="27" cy="27" r="26" transform="rotate(-90 27 27)" fill="white" stroke="#FF9029" stroke-width="2"/>\n\t<path d="M38.3137 39.3137L13.3823 30.304L29.304 14.3823L38.3137 39.3137Z" fill="#FF9029"/>\n\t<circle cx="245" cy="27" r="26" transform="rotate(-90 245 27)" fill="white" stroke="#FDCD2B" stroke-width="2"/>\n\t<path d="M233.686 39.3137L242.696 14.3823L258.618 30.304L233.686 39.3137Z" fill="#FDCD2B"/>\n\t</svg>\n\t','<svg width="330" height="330" viewBox="0 0 330 330" fill="none" xmlns="http://www.w3.org/2000/svg" style="--shape-scale:1" data-order="0,1,2,3">\n\t<path d="M82.5 0H165V247.5H82.5V0Z" fill="#0374E1"/>\n\t<path d="M0 247.5L-3.60619e-06 165L247.5 165L247.5 247.5L0 247.5Z" fill="#5FCC3B"/>\n\t<path d="M247.5 330L165 330L165 82.5L247.5 82.5L247.5 330Z" fill="#FDCD2B"/>\n\t<path d="M330 82.5L330 165L82.5 165L82.5 82.5L330 82.5Z" fill="#F23C31"/>\n\t<circle cx="205.7" cy="41.8" r="30.9" transform="rotate(90 205.7 41.8)" fill="white" stroke="#FDCD2B" stroke-width="2"/>\n\t<path d="M205.7 59.5224L192.399 31.1668L219.002 31.1668L205.7 59.5224Z" fill="#FDCD2B"/>\n\t<circle cx="41.8" cy="123.2" r="30.9" fill="white" stroke="#F23C31" stroke-width="2"/>\n\t<path d="M59.5223 123.2L31.1668 136.502L31.1668 109.899L59.5223 123.2Z" fill="#F23C31"/>\n\t<circle cx="123.2" cy="288.2" r="30.9" transform="rotate(-90 123.2 288.2)" fill="white" stroke="#0374E1" stroke-width="2"/>\n\t<path d="M123.2 270.478L136.501 298.833L109.898 298.833L123.2 270.478Z" fill="#0374E1"/>\n\t<circle cx="288.2" cy="206.8" r="30.9" transform="rotate(180 288.2 206.8)" fill="white" stroke="#5FCC3B" stroke-width="2"/>\n\t<path d="M270.478 206.8L298.833 193.498L298.833 220.101L270.478 206.8Z" fill="#5FCC3B"/>\n\t</svg>\n\t','<svg width="272" height="385" viewBox="0 0 272 385" fill="none" xmlns="http://www.w3.org/2000/svg" style="--shape-scale:1.34;--shape-y:3px;" data-order="0,1,2,3;0,2,1,3;0,2,3,1">\n\t<path d="M77 136L136 77L195 136V326H77V136Z" fill="#EA5628"/>\n\t<rect x="59" y="296" width="154" height="30" fill="#D9170B"/>\n\t<rect width="241.514" height="32.9005" transform="matrix(0.707107 0.707107 0.707107 -0.707107 39 62.2642)" fill="#FF9029"/>\n\t<rect width="241.514" height="32.9005" transform="matrix(-0.707107 0.707107 0.707107 0.707107 209.776 39)" fill="#FDCD2B"/>\n\t<circle cx="136" cy="358" r="26" transform="rotate(-90 136 358)" fill="white" stroke="#EA5628" stroke-width="2"/>\n\t<path d="M136 343L147.258 367L124.742 367L136 343Z" fill="#EA5628"/>\n\t<circle cx="245" cy="311" r="26" transform="rotate(180 245 311)" fill="white" stroke="#D9170B" stroke-width="2"/>\n\t<path d="M230 311L254 299.742L254 322.258L230 311Z" fill="#D9170B"/>\n\t<circle cx="27" cy="27" r="26" transform="rotate(-90 27 27)" fill="white" stroke="#FF9029" stroke-width="2"/>\n\t<path d="M38.3137 39.3137L13.3823 30.304L29.304 14.3823L38.3137 39.3137Z" fill="#FF9029"/>\n\t<circle cx="245" cy="27" r="26" transform="rotate(-90 245 27)" fill="white" stroke="#FDCD2B" stroke-width="2"/>\n\t<path d="M233.686 39.3137L242.696 14.3823L258.618 30.304L233.686 39.3137Z" fill="#FDCD2B"/>\n\t</svg>\n\t'];vkBridge.send("VKWebAppInit");const n=document.querySelector("canvas");n.getContext("2d");const s=640/360;n.width=360,n.height=640;let a=1;const o=document.querySelector(".wrapper"),c=document.querySelectorAll(".screen"),d=(document.querySelector(".screen--start"),document.querySelector(".screen--game")),h=(document.querySelector(".screen--end"),d.querySelector(".shape-container")),f=d.querySelector(".shape-preview-container"),L=document.querySelector(".play"),w=document.querySelector(".post"),p=document.querySelector(".invite"),m=document.querySelector(".home"),g=document.querySelector(".restart"),u=document.querySelector(".back"),y=document.querySelector(".reward"),k=document.querySelector(".score"),v=(document.querySelector(".result"),document.querySelector(".highscore")),x=document.querySelector(".preloader");let C=!1,F=0,B=3,b=!0;setTimeout((()=>{x.classList.add("hidden")}),2e3),y.firstElementChild.textContent=B,y.lastElementChild.textContent=G(B);let E,D,M,A,Z,S,q,V={};function H(){setTimeout((()=>{C=!0}),1e3)}function _(t){function e(t){t===M?t.classList.add("bg"):t.classList.add("shape-preview");let e=!0;Array.from(t.children).forEach((r=>{"circle"===r.tagName&&(e=!1),e?t===M&&r.setAttribute("fill","rgb(237, 245, 255)"):r.remove()})),t===M?E.insertAdjacentElement("beforebegin",t):f.insertAdjacentElement("afterbegin",t)}h.insertAdjacentHTML("afterbegin",l[t]),E=h.querySelector("svg"),D=E.getAttribute("data-order").split(";").map((t=>t.split(","))),M=E.cloneNode(!0),A=E.cloneNode(!0),E.classList.add("shape"),Array.from(E.children).forEach((t=>{if("circle"!==t.tagName&&"g"!==t.parentElement.tagName)t.classList.add("shape__path");else if("circle"===t.tagName){t.insertAdjacentHTML("beforebegin",`<g class="shape__button" data-color="${t.getAttribute("stroke")}">`);const e=t.previousElementSibling,r=t,i=t.nextElementSibling;t.nextElementSibling.remove(),t.remove(),e.insertAdjacentElement("afterbegin",r),e.insertAdjacentElement("beforeend",i)}})),Z=[],S=Array.from(E.querySelectorAll(".shape__path")),q=Array.from(E.querySelectorAll(".shape__button")),S.forEach(((t,e)=>{t.setAttribute("data-index",e),t.remove()})),e(M),e(A)}k.textContent=F+1,_(F);let j=G(B);function N(){y.firstElementChild.textContent=B,y.lastElementChild.textContent=j}function W(){const t=Z.map((t=>t.getAttribute("data-index")));D.forEach((e=>{JSON.stringify(e)===JSON.stringify(t)&&(K(r),b=!1,m.classList.add("hidden"),k.classList.add("hidden"),u.classList.add("hidden"),y.classList.add("hidden"),confetti({particleCount:100,spread:70,gravity:1.5,scalar:1.2,origin:{y:.7}}),setTimeout((()=>{F++,b=!0,k.textContent=F+1,m.classList.remove("hidden"),k.classList.remove("hidden"),y.classList.remove("hidden"),E.remove(),M.remove(),A.remove(),_(F)}),2e3))}))}function T(t){c.forEach((e=>{let r="hidden--left",i="hidden--right";t.classList.contains("hidden--left")&&(r="hidden--right",i="hidden--left"),e.classList.contains("hidden")?e===t&&$([e],"remove",["hidden",i],0):$([e],"add",["hidden",r],0)}))}function $(t,e,r,i=0){setTimeout((()=>{t.forEach((t=>{r.forEach((r=>{"add"===e?t.classList.add(r):t.classList.remove(r)}))}))}),i)}function K(t){const e=new Audio,r=`./${t.split("../")[1]}`,i=r.split("audio/")[1].split(".")[0];e.src=r,V[i]=e,V[i].play()}function G(t){let e=Math.abs(t);return e%=100,e>=5&&e<=20?"подсказок":(e%=10,1===e?"подсказка":e>=2&&e<=4?"подсказки":"подсказок")}function I(){const t=window.innerHeight/window.innerWidth;s>t?(n.width=window.innerHeight/s,n.height=window.innerHeight,a=window.innerHeight/640,o.style=`--scale:${a}`):(n.width=window.innerWidth,n.height=window.innerWidth*s,a=window.innerWidth/360,o.style=`--scale:${a}`)}T(d),H(),document.addEventListener("click",(t=>{const r=t.target;if(r===L);else if(r===w){const t=v.firstElementChild.textContent;vkBridge.send("VKWebAppStorageGet",{keys:["userHighscore"]}).then((()=>{vkBridge.send("VKWebAppShowWallPostBox",{message:`Мой рекорд в игре Game - ${t} ${G(t)}! сможешь побить?\n\nOrby Games (vk.com/orby.games) - бесплатные игры для ВКонтакте. Присоединяйтесь!\n\n#игры #vkgames #directgames`,attachments:"https://vk.com/appId"})}))}else r===p?vkBridge.send("VKWebAppShowInviteBox"):r===g?(T(d),H()):r===m||C&&(r.closest(".shape__button")?r.parentElement.classList.contains("disabled")||(Z.length||u.classList.remove("hidden"),S.forEach((t=>{t.getAttribute("fill")===r.parentElement.getAttribute("data-color")&&(E.insertAdjacentElement("beforeend",t),Z.push(t),r.parentElement.classList.add("disabled"),q.length===Z.length&&W())})),b&&K(i)):r===u?E.lastElementChild.classList.contains("shape__path")&&(Z.splice(Z.length-1,1),q.forEach((t=>{t.getAttribute("data-color")===E.lastElementChild.getAttribute("fill")&&t.classList.remove("disabled")})),E.lastElementChild.remove(),Z.length||u.classList.add("hidden")):r.closest(".reward")&&(B>0?(B--,B<1?(j="подсказка?",y.classList.add("show")):j=G(B),function(){if(Z.length){const t=Z.map((t=>t.getAttribute("data-index")));for(let e=0;e<D.length;e++){const r=D[e];for(let i=0;i<r.length;i++){const l=r[i];if(!t[i]){E.insertAdjacentElement("beforeend",S[l]),Z.push(S[l]),q.forEach((t=>{t.getAttribute("data-color")===S[l].getAttribute("fill")&&t.classList.add("disabled")})),q.length===Z.length&&W(),e=D.length;break}if(t[i]!==l){if(e===D.length-1){q.forEach((t=>{t.getAttribute("data-color")===Z[Z.length-1].getAttribute("fill")&&t.classList.remove("disabled")})),Z[Z.length-1].remove(),Z.splice(Z.length-1,1),e=D.length;break}break}}}}else{const t=S[D[0][0]];E.insertAdjacentElement("beforeend",t),Z.push(t),q.forEach((e=>{e.getAttribute("data-color")===t.getAttribute("fill")&&e.classList.add("disabled")})),u.classList.remove("hidden")}}()):vkBridge.send("VKWebAppCheckNativeAds",{ad_format:"reward"}).then((()=>{vkBridge.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((()=>{B=3,j=G(B),y.classList.remove("show"),N()})).catch((()=>{j="нет рекламы",y.classList.add("error"),N()}))})),N()));var l;r.closest("button")&&(l=[r.closest("button")],200,l.forEach((t=>{t.classList.add("scale"),setTimeout((()=>{t.classList.remove("scale")}),200)})),b&&(r.closest(".back")?K(i):K(e)))})),I(),window.addEventListener("resize",I)})();