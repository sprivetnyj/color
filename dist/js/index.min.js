(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var r=t.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var i=r.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.p;const e=t.p+"../audio/click.mp3",r=(t.p,['<svg width="330" height="330" viewBox="0 0 330 330" fill="none" xmlns="http://www.w3.org/2000/svg" style="--shape-scale:1" data-order="0,1,2,3">\n\t<path d="M82.5 0H165V247.5H82.5V0Z" fill="#0374E1"/>\n\t<path d="M0 247.5L-3.60619e-06 165L247.5 165L247.5 247.5L0 247.5Z" fill="#5FCC3B"/>\n\t<path d="M247.5 330L165 330L165 82.5L247.5 82.5L247.5 330Z" fill="#FDCD2B"/>\n\t<path d="M330 82.5L330 165L82.5 165L82.5 82.5L330 82.5Z" fill="#F23C31"/>\n\t<circle cx="205.7" cy="41.8" r="30.9" transform="rotate(90 205.7 41.8)" fill="white" stroke="#FDCD2B" stroke-width="2"/>\n\t<path d="M205.7 59.5224L192.399 31.1668L219.002 31.1668L205.7 59.5224Z" fill="#FDCD2B"/>\n\t<circle cx="41.8" cy="123.2" r="30.9" fill="white" stroke="#F23C31" stroke-width="2"/>\n\t<path d="M59.5223 123.2L31.1668 136.502L31.1668 109.899L59.5223 123.2Z" fill="#F23C31"/>\n\t<circle cx="123.2" cy="288.2" r="30.9" transform="rotate(-90 123.2 288.2)" fill="white" stroke="#0374E1" stroke-width="2"/>\n\t<path d="M123.2 270.478L136.501 298.833L109.898 298.833L123.2 270.478Z" fill="#0374E1"/>\n\t<circle cx="288.2" cy="206.8" r="30.9" transform="rotate(180 288.2 206.8)" fill="white" stroke="#5FCC3B" stroke-width="2"/>\n\t<path d="M270.478 206.8L298.833 193.498L298.833 220.101L270.478 206.8Z" fill="#5FCC3B"/>\n\t</svg>\n\t','<svg width="272" height="385" viewBox="0 0 272 385" fill="none" xmlns="http://www.w3.org/2000/svg" style="--shape-scale:1.34;--shape-y:3px;" data-order="0,1,2,3;0,2,1,3;0,2,3,1">\n\t<path d="M77 136L136 77L195 136V326H77V136Z" fill="#EA5628"/>\n\t<rect x="59" y="296" width="154" height="30" fill="#D9170B"/>\n\t<rect width="241.514" height="32.9005" transform="matrix(0.707107 0.707107 0.707107 -0.707107 39 62.2642)" fill="#FF9029"/>\n\t<rect width="241.514" height="32.9005" transform="matrix(-0.707107 0.707107 0.707107 0.707107 209.776 39)" fill="#FDCD2B"/>\n\t<circle cx="136" cy="358" r="26" transform="rotate(-90 136 358)" fill="white" stroke="#EA5628" stroke-width="2"/>\n\t<path d="M136 343L147.258 367L124.742 367L136 343Z" fill="#EA5628"/>\n\t<circle cx="245" cy="311" r="26" transform="rotate(180 245 311)" fill="white" stroke="#D9170B" stroke-width="2"/>\n\t<path d="M230 311L254 299.742L254 322.258L230 311Z" fill="#D9170B"/>\n\t<circle cx="27" cy="27" r="26" transform="rotate(-90 27 27)" fill="white" stroke="#FF9029" stroke-width="2"/>\n\t<path d="M38.3137 39.3137L13.3823 30.304L29.304 14.3823L38.3137 39.3137Z" fill="#FF9029"/>\n\t<circle cx="245" cy="27" r="26" transform="rotate(-90 245 27)" fill="white" stroke="#FDCD2B" stroke-width="2"/>\n\t<path d="M233.686 39.3137L242.696 14.3823L258.618 30.304L233.686 39.3137Z" fill="#FDCD2B"/>\n\t</svg>\n\t','<svg width="330" height="330" viewBox="0 0 330 330" fill="none" xmlns="http://www.w3.org/2000/svg" style="--shape-scale:1" data-order="0,1,2,3">\n\t<path d="M82.5 0H165V247.5H82.5V0Z" fill="#0374E1"/>\n\t<path d="M0 247.5L-3.60619e-06 165L247.5 165L247.5 247.5L0 247.5Z" fill="#5FCC3B"/>\n\t<path d="M247.5 330L165 330L165 82.5L247.5 82.5L247.5 330Z" fill="#FDCD2B"/>\n\t<path d="M330 82.5L330 165L82.5 165L82.5 82.5L330 82.5Z" fill="#F23C31"/>\n\t<circle cx="205.7" cy="41.8" r="30.9" transform="rotate(90 205.7 41.8)" fill="white" stroke="#FDCD2B" stroke-width="2"/>\n\t<path d="M205.7 59.5224L192.399 31.1668L219.002 31.1668L205.7 59.5224Z" fill="#FDCD2B"/>\n\t<circle cx="41.8" cy="123.2" r="30.9" fill="white" stroke="#F23C31" stroke-width="2"/>\n\t<path d="M59.5223 123.2L31.1668 136.502L31.1668 109.899L59.5223 123.2Z" fill="#F23C31"/>\n\t<circle cx="123.2" cy="288.2" r="30.9" transform="rotate(-90 123.2 288.2)" fill="white" stroke="#0374E1" stroke-width="2"/>\n\t<path d="M123.2 270.478L136.501 298.833L109.898 298.833L123.2 270.478Z" fill="#0374E1"/>\n\t<circle cx="288.2" cy="206.8" r="30.9" transform="rotate(180 288.2 206.8)" fill="white" stroke="#5FCC3B" stroke-width="2"/>\n\t<path d="M270.478 206.8L298.833 193.498L298.833 220.101L270.478 206.8Z" fill="#5FCC3B"/>\n\t</svg>\n\t']);vkBridge.send("VKWebAppInit");const i=document.querySelector("canvas");i.getContext("2d");const n=640/360;i.width=360,i.height=640;let l=1;const s=document.querySelector(".wrapper"),o=document.querySelectorAll(".screen"),a=(document.querySelector(".screen--start"),document.querySelector(".screen--game")),c=(document.querySelector(".screen--end"),a.querySelector(".shape-container")),d=a.querySelector(".shape-preview-container"),h=document.querySelector(".play"),f=document.querySelector(".post"),m=document.querySelector(".invite"),p=document.querySelector(".home"),g=document.querySelector(".restart"),u=document.querySelector(".back"),L=document.querySelector(".reward"),w=document.querySelector(".score"),b=(document.querySelector(".result"),document.querySelector(".highscore")),y=document.querySelector(".preloader");let v=!1,E=0,A=3;setTimeout((()=>{y.classList.add("hidden")}),1e3),L.firstElementChild.textContent=A,L.lastElementChild.textContent=W(A);let C,k,x,S,B,F,M,q={};function D(){setTimeout((()=>{v=!0}),1e3)}function Z(t){function e(t){t===x?t.classList.add("bg"):t.classList.add("shape-preview");let e=!0;Array.from(t.children).forEach((r=>{"circle"===r.tagName&&(e=!1),e?t===x&&r.setAttribute("fill","rgb(237, 245, 255)"):r.remove()})),t===x?C.insertAdjacentElement("beforebegin",t):d.insertAdjacentElement("afterbegin",t)}c.insertAdjacentHTML("afterbegin",r[t]),C=c.querySelector("svg"),k=C.getAttribute("data-order").split(";").map((t=>t.split(","))),x=C.cloneNode(!0),S=C.cloneNode(!0),C.classList.add("shape"),Array.from(C.children).forEach((t=>{if("circle"!==t.tagName&&"g"!==t.parentElement.tagName)t.classList.add("shape__path");else if("circle"===t.tagName){t.insertAdjacentHTML("beforebegin",`<g class="shape__button" data-color="${t.getAttribute("stroke")}">`);const e=t.previousElementSibling,r=t,i=t.nextElementSibling;t.nextElementSibling.remove(),t.remove(),e.insertAdjacentElement("afterbegin",r),e.insertAdjacentElement("beforeend",i)}})),B=[],F=Array.from(C.querySelectorAll(".shape__path")),M=Array.from(C.querySelectorAll(".shape__button")),F.forEach(((t,e)=>{t.setAttribute("data-index",e),t.remove()})),e(x),e(S)}w.textContent=E+1,Z(E);let _=W(A);function H(){L.firstElementChild.textContent=A,L.lastElementChild.textContent=_}function V(){const t=B.map((t=>t.getAttribute("data-index")));k.forEach((e=>{JSON.stringify(e)===JSON.stringify(t)&&(p.classList.add("hidden"),w.classList.add("hidden"),u.classList.add("hidden"),L.classList.add("hidden"),confetti({particleCount:100,spread:70,gravity:1.5,scalar:1.2,origin:{y:.7}}),setTimeout((()=>{E++,w.textContent=E+1,p.classList.remove("hidden"),w.classList.remove("hidden"),u.classList.remove("hidden"),L.classList.remove("hidden"),C.remove(),x.remove(),S.remove(),Z(E)}),2e3))}))}function j(t){o.forEach((e=>{let r="hidden--left",i="hidden--right";t.classList.contains("hidden--left")&&(r="hidden--right",i="hidden--left"),e.classList.contains("hidden")?e===t&&N([e],"remove",["hidden",i],0):N([e],"add",["hidden",r],0)}))}function N(t,e,r,i=0){setTimeout((()=>{t.forEach((t=>{r.forEach((r=>{"add"===e?t.classList.add(r):t.classList.remove(r)}))}))}),i)}function W(t){let e=Math.abs(t);return e%=100,e>=5&&e<=20?"подсказок":(e%=10,1===e?"подсказка":e>=2&&e<=4?"подсказки":"подсказок")}function T(){const t=window.innerHeight/window.innerWidth;n>t?(i.width=window.innerHeight/n,i.height=window.innerHeight,l=window.innerHeight/640,s.style=`--scale:${l}`):(i.width=window.innerWidth,i.height=window.innerWidth*n,l=window.innerWidth/360,s.style=`--scale:${l}`)}j(a),D(),document.addEventListener("click",(t=>{const r=t.target;if(r===h);else if(r===f){const t=b.firstElementChild.textContent;vkBridge.send("VKWebAppStorageGet",{keys:["userHighscore"]}).then((()=>{vkBridge.send("VKWebAppShowWallPostBox",{message:`Мой рекорд в игре Game - ${t} ${W(t)}! сможешь побить?\n\nOrby Games (vk.com/orby.games) - бесплатные игры для ВКонтакте. Присоединяйтесь!\n\n#игры #vkgames #directgames`,attachments:"https://vk.com/appId"})}))}else r===m?vkBridge.send("VKWebAppShowInviteBox"):r===g?(j(a),D()):r===p||v&&(r.closest(".shape__button")?r.parentElement.classList.contains("disabled")||F.forEach((t=>{t.getAttribute("fill")===r.parentElement.getAttribute("data-color")&&(C.insertAdjacentElement("beforeend",t),B.push(t),r.parentElement.classList.add("disabled"),M.length===B.length&&V())})):r===u?C.lastElementChild.classList.contains("shape__path")&&(B.splice(B.length-1,1),M.forEach((t=>{t.getAttribute("data-color")===C.lastElementChild.getAttribute("fill")&&t.classList.remove("disabled")})),C.lastElementChild.remove()):r.closest(".reward")&&(A>0?(A--,A<1?(_="подсказка?",L.classList.add("show")):_=W(A),function(){if(B.length){const t=B.map((t=>t.getAttribute("data-index")));for(let e=0;e<k.length;e++){const r=k[e];for(let i=0;i<r.length;i++){const n=r[i];if(!t[i]){C.insertAdjacentElement("beforeend",F[n]),B.push(F[n]),M.forEach((t=>{t.getAttribute("data-color")===F[n].getAttribute("fill")&&t.classList.add("disabled")})),M.length===B.length&&V(),e=k.length;break}if(t[i]!==n){if(e===k.length-1){M.forEach((t=>{t.getAttribute("data-color")===B[B.length-1].getAttribute("fill")&&t.classList.remove("disabled")})),B[B.length-1].remove(),B.splice(B.length-1,1),e=k.length;break}break}}}}else{const t=F[k[0][0]];C.insertAdjacentElement("beforeend",t),B.push(t),M.forEach((e=>{e.getAttribute("data-color")===t.getAttribute("fill")&&e.classList.add("disabled")}))}}()):vkBridge.send("VKWebAppCheckNativeAds",{ad_format:"reward"}).then((()=>{vkBridge.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((()=>{A=3,_=W(A),L.classList.remove("show")})).catch((()=>{_="нет рекламы",L.classList.add("error")})),H()})),H()));var i;r.closest("button")&&(i=[r.closest("button")],200,i.forEach((t=>{t.classList.add("scale"),setTimeout((()=>{t.classList.remove("scale")}),200)})),function(t){const e=new Audio,r=`./${t.split("../")[1]}`,i=r.split("audio/")[1].split(".")[0];e.src=r,q[i]=e,q[i].play()}(e))})),T(),window.addEventListener("resize",T)})();